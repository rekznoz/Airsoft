1752379879
8a0c4faa9771445189035ca844487507-phpdoc%3Acf13b512a3b0627a82f41ff2230f9100-f6a677eda33a7017ba81a5247502dfc1
s:10092:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBuYW1lIjtzOjQ2OiIyMDI1XzAyXzE3XzEyMTIzM19jcmVhdGVfcGVybWlzc2lvbl90YWJsZXMucGhwIjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWVzcGFjZXMiO2E6MDp7fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW5jbHVkZXMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAZnVuY3Rpb25zIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNvbnN0YW50cyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjbGFzc2VzIjthOjA6e31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGludGVyZmFjZXMiO2E6MDp7fXM6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAdHJhaXRzIjthOjA6e31zOjQwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGVudW1zIjthOjA6e31zOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6ImY2YTY3N2VkYTMzYTcwMTdiYTgxYTUyNDc1MDJkZmMxIjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAHBhdGgiO3M6NjY6ImRhdGFiYXNlL21pZ3JhdGlvbnMvMjAyNV8wMl8xN18xMjEyMzNfY3JlYXRlX3Blcm1pc3Npb25fdGFibGVzLnBocCI7czo0MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBzb3VyY2UiO3M6NjU4OToiPD9waHAKCnVzZSBJbGx1bWluYXRlXERhdGFiYXNlXE1pZ3JhdGlvbnNcTWlncmF0aW9uOwp1c2UgSWxsdW1pbmF0ZVxEYXRhYmFzZVxTY2hlbWFcQmx1ZXByaW50Owp1c2UgSWxsdW1pbmF0ZVxTdXBwb3J0XEZhY2FkZXNcU2NoZW1hOwoKcmV0dXJuIG5ldyBjbGFzcyBleHRlbmRzIE1pZ3JhdGlvbgp7CiAgICAvKioKICAgICAqIFJ1biB0aGUgbWlncmF0aW9ucy4KICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHVwKCk6IHZvaWQKICAgIHsKICAgICAgICAkdGVhbXMgPSBjb25maWcoJ3Blcm1pc3Npb24udGVhbXMnKTsKICAgICAgICAkdGFibGVOYW1lcyA9IGNvbmZpZygncGVybWlzc2lvbi50YWJsZV9uYW1lcycpOwogICAgICAgICRjb2x1bW5OYW1lcyA9IGNvbmZpZygncGVybWlzc2lvbi5jb2x1bW5fbmFtZXMnKTsKICAgICAgICAkcGl2b3RSb2xlID0gJGNvbHVtbk5hbWVzWydyb2xlX3Bpdm90X2tleSddID8/ICdyb2xlX2lkJzsKICAgICAgICAkcGl2b3RQZXJtaXNzaW9uID0gJGNvbHVtbk5hbWVzWydwZXJtaXNzaW9uX3Bpdm90X2tleSddID8/ICdwZXJtaXNzaW9uX2lkJzsKCiAgICAgICAgaWYgKGVtcHR5KCR0YWJsZU5hbWVzKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgXEV4Y2VwdGlvbignRXJyb3I6IGNvbmZpZy9wZXJtaXNzaW9uLnBocCBub3QgbG9hZGVkLiBSdW4gW3BocCBhcnRpc2FuIGNvbmZpZzpjbGVhcl0gYW5kIHRyeSBhZ2Fpbi4nKTsKICAgICAgICB9CiAgICAgICAgaWYgKCR0ZWFtcyAmJiBlbXB0eSgkY29sdW1uTmFtZXNbJ3RlYW1fZm9yZWlnbl9rZXknXSA/PyBudWxsKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgXEV4Y2VwdGlvbignRXJyb3I6IHRlYW1fZm9yZWlnbl9rZXkgb24gY29uZmlnL3Blcm1pc3Npb24ucGhwIG5vdCBsb2FkZWQuIFJ1biBbcGhwIGFydGlzYW4gY29uZmlnOmNsZWFyXSBhbmQgdHJ5IGFnYWluLicpOwogICAgICAgIH0KCiAgICAgICAgU2NoZW1hOjpjcmVhdGUoJHRhYmxlTmFtZXNbJ3Blcm1pc3Npb25zJ10sIHN0YXRpYyBmdW5jdGlvbiAoQmx1ZXByaW50ICR0YWJsZSkgewogICAgICAgICAgICAvLyAkdGFibGUtPmVuZ2luZSgnSW5ub0RCJyk7CiAgICAgICAgICAgICR0YWJsZS0+YmlnSW5jcmVtZW50cygnaWQnKTsgLy8gcGVybWlzc2lvbiBpZAogICAgICAgICAgICAkdGFibGUtPnN0cmluZygnbmFtZScpOyAgICAgICAvLyBGb3IgTXlJU0FNIHVzZSBzdHJpbmcoJ25hbWUnLCAyMjUpOyAvLyAob3IgMTY2IGZvciBJbm5vREIgd2l0aCBSZWR1bmRhbnQvQ29tcGFjdCByb3cgZm9ybWF0KQogICAgICAgICAgICAkdGFibGUtPnN0cmluZygnZ3VhcmRfbmFtZScpOyAvLyBGb3IgTXlJU0FNIHVzZSBzdHJpbmcoJ2d1YXJkX25hbWUnLCAyNSk7CiAgICAgICAgICAgICR0YWJsZS0+dGltZXN0YW1wcygpOwoKICAgICAgICAgICAgJHRhYmxlLT51bmlxdWUoWyduYW1lJywgJ2d1YXJkX25hbWUnXSk7CiAgICAgICAgfSk7CgogICAgICAgIFNjaGVtYTo6Y3JlYXRlKCR0YWJsZU5hbWVzWydyb2xlcyddLCBzdGF0aWMgZnVuY3Rpb24gKEJsdWVwcmludCAkdGFibGUpIHVzZSAoJHRlYW1zLCAkY29sdW1uTmFtZXMpIHsKICAgICAgICAgICAgLy8gJHRhYmxlLT5lbmdpbmUoJ0lubm9EQicpOwogICAgICAgICAgICAkdGFibGUtPmJpZ0luY3JlbWVudHMoJ2lkJyk7IC8vIHJvbGUgaWQKICAgICAgICAgICAgaWYgKCR0ZWFtcyB8fCBjb25maWcoJ3Blcm1pc3Npb24udGVzdGluZycpKSB7IC8vIHBlcm1pc3Npb24udGVzdGluZyBpcyBhIGZpeCBmb3Igc3FsaXRlIHRlc3RpbmcKICAgICAgICAgICAgICAgICR0YWJsZS0+dW5zaWduZWRCaWdJbnRlZ2VyKCRjb2x1bW5OYW1lc1sndGVhbV9mb3JlaWduX2tleSddKS0+bnVsbGFibGUoKTsKICAgICAgICAgICAgICAgICR0YWJsZS0+aW5kZXgoJGNvbHVtbk5hbWVzWyd0ZWFtX2ZvcmVpZ25fa2V5J10sICdyb2xlc190ZWFtX2ZvcmVpZ25fa2V5X2luZGV4Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJHRhYmxlLT5zdHJpbmcoJ25hbWUnKTsgICAgICAgLy8gRm9yIE15SVNBTSB1c2Ugc3RyaW5nKCduYW1lJywgMjI1KTsgLy8gKG9yIDE2NiBmb3IgSW5ub0RCIHdpdGggUmVkdW5kYW50L0NvbXBhY3Qgcm93IGZvcm1hdCkKICAgICAgICAgICAgJHRhYmxlLT5zdHJpbmcoJ2d1YXJkX25hbWUnKTsgLy8gRm9yIE15SVNBTSB1c2Ugc3RyaW5nKCdndWFyZF9uYW1lJywgMjUpOwogICAgICAgICAgICAkdGFibGUtPnRpbWVzdGFtcHMoKTsKICAgICAgICAgICAgaWYgKCR0ZWFtcyB8fCBjb25maWcoJ3Blcm1pc3Npb24udGVzdGluZycpKSB7CiAgICAgICAgICAgICAgICAkdGFibGUtPnVuaXF1ZShbJGNvbHVtbk5hbWVzWyd0ZWFtX2ZvcmVpZ25fa2V5J10sICduYW1lJywgJ2d1YXJkX25hbWUnXSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkdGFibGUtPnVuaXF1ZShbJ25hbWUnLCAnZ3VhcmRfbmFtZSddKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBTY2hlbWE6OmNyZWF0ZSgkdGFibGVOYW1lc1snbW9kZWxfaGFzX3Blcm1pc3Npb25zJ10sIHN0YXRpYyBmdW5jdGlvbiAoQmx1ZXByaW50ICR0YWJsZSkgdXNlICgkdGFibGVOYW1lcywgJGNvbHVtbk5hbWVzLCAkcGl2b3RQZXJtaXNzaW9uLCAkdGVhbXMpIHsKICAgICAgICAgICAgJHRhYmxlLT51bnNpZ25lZEJpZ0ludGVnZXIoJHBpdm90UGVybWlzc2lvbik7CgogICAgICAgICAgICAkdGFibGUtPnN0cmluZygnbW9kZWxfdHlwZScpOwogICAgICAgICAgICAkdGFibGUtPnVuc2lnbmVkQmlnSW50ZWdlcigkY29sdW1uTmFtZXNbJ21vZGVsX21vcnBoX2tleSddKTsKICAgICAgICAgICAgJHRhYmxlLT5pbmRleChbJGNvbHVtbk5hbWVzWydtb2RlbF9tb3JwaF9rZXknXSwgJ21vZGVsX3R5cGUnXSwgJ21vZGVsX2hhc19wZXJtaXNzaW9uc19tb2RlbF9pZF9tb2RlbF90eXBlX2luZGV4Jyk7CgogICAgICAgICAgICAkdGFibGUtPmZvcmVpZ24oJHBpdm90UGVybWlzc2lvbikKICAgICAgICAgICAgICAgIC0+cmVmZXJlbmNlcygnaWQnKSAvLyBwZXJtaXNzaW9uIGlkCiAgICAgICAgICAgICAgICAtPm9uKCR0YWJsZU5hbWVzWydwZXJtaXNzaW9ucyddKQogICAgICAgICAgICAgICAgLT5vbkRlbGV0ZSgnY2FzY2FkZScpOwogICAgICAgICAgICBpZiAoJHRlYW1zKSB7CiAgICAgICAgICAgICAgICAkdGFibGUtPnVuc2lnbmVkQmlnSW50ZWdlcigkY29sdW1uTmFtZXNbJ3RlYW1fZm9yZWlnbl9rZXknXSk7CiAgICAgICAgICAgICAgICAkdGFibGUtPmluZGV4KCRjb2x1bW5OYW1lc1sndGVhbV9mb3JlaWduX2tleSddLCAnbW9kZWxfaGFzX3Blcm1pc3Npb25zX3RlYW1fZm9yZWlnbl9rZXlfaW5kZXgnKTsKCiAgICAgICAgICAgICAgICAkdGFibGUtPnByaW1hcnkoWyRjb2x1bW5OYW1lc1sndGVhbV9mb3JlaWduX2tleSddLCAkcGl2b3RQZXJtaXNzaW9uLCAkY29sdW1uTmFtZXNbJ21vZGVsX21vcnBoX2tleSddLCAnbW9kZWxfdHlwZSddLAogICAgICAgICAgICAgICAgICAgICdtb2RlbF9oYXNfcGVybWlzc2lvbnNfcGVybWlzc2lvbl9tb2RlbF90eXBlX3ByaW1hcnknKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICR0YWJsZS0+cHJpbWFyeShbJHBpdm90UGVybWlzc2lvbiwgJGNvbHVtbk5hbWVzWydtb2RlbF9tb3JwaF9rZXknXSwgJ21vZGVsX3R5cGUnXSwKICAgICAgICAgICAgICAgICAgICAnbW9kZWxfaGFzX3Blcm1pc3Npb25zX3Blcm1pc3Npb25fbW9kZWxfdHlwZV9wcmltYXJ5Jyk7CiAgICAgICAgICAgIH0KCiAgICAgICAgfSk7CgogICAgICAgIFNjaGVtYTo6Y3JlYXRlKCR0YWJsZU5hbWVzWydtb2RlbF9oYXNfcm9sZXMnXSwgc3RhdGljIGZ1bmN0aW9uIChCbHVlcHJpbnQgJHRhYmxlKSB1c2UgKCR0YWJsZU5hbWVzLCAkY29sdW1uTmFtZXMsICRwaXZvdFJvbGUsICR0ZWFtcykgewogICAgICAgICAgICAkdGFibGUtPnVuc2lnbmVkQmlnSW50ZWdlcigkcGl2b3RSb2xlKTsKCiAgICAgICAgICAgICR0YWJsZS0+c3RyaW5nKCdtb2RlbF90eXBlJyk7CiAgICAgICAgICAgICR0YWJsZS0+dW5zaWduZWRCaWdJbnRlZ2VyKCRjb2x1bW5OYW1lc1snbW9kZWxfbW9ycGhfa2V5J10pOwogICAgICAgICAgICAkdGFibGUtPmluZGV4KFskY29sdW1uTmFtZXNbJ21vZGVsX21vcnBoX2tleSddLCAnbW9kZWxfdHlwZSddLCAnbW9kZWxfaGFzX3JvbGVzX21vZGVsX2lkX21vZGVsX3R5cGVfaW5kZXgnKTsKCiAgICAgICAgICAgICR0YWJsZS0+Zm9yZWlnbigkcGl2b3RSb2xlKQogICAgICAgICAgICAgICAgLT5yZWZlcmVuY2VzKCdpZCcpIC8vIHJvbGUgaWQKICAgICAgICAgICAgICAgIC0+b24oJHRhYmxlTmFtZXNbJ3JvbGVzJ10pCiAgICAgICAgICAgICAgICAtPm9uRGVsZXRlKCdjYXNjYWRlJyk7CiAgICAgICAgICAgIGlmICgkdGVhbXMpIHsKICAgICAgICAgICAgICAgICR0YWJsZS0+dW5zaWduZWRCaWdJbnRlZ2VyKCRjb2x1bW5OYW1lc1sndGVhbV9mb3JlaWduX2tleSddKTsKICAgICAgICAgICAgICAgICR0YWJsZS0+aW5kZXgoJGNvbHVtbk5hbWVzWyd0ZWFtX2ZvcmVpZ25fa2V5J10sICdtb2RlbF9oYXNfcm9sZXNfdGVhbV9mb3JlaWduX2tleV9pbmRleCcpOwoKICAgICAgICAgICAgICAgICR0YWJsZS0+cHJpbWFyeShbJGNvbHVtbk5hbWVzWyd0ZWFtX2ZvcmVpZ25fa2V5J10sICRwaXZvdFJvbGUsICRjb2x1bW5OYW1lc1snbW9kZWxfbW9ycGhfa2V5J10sICdtb2RlbF90eXBlJ10sCiAgICAgICAgICAgICAgICAgICAgJ21vZGVsX2hhc19yb2xlc19yb2xlX21vZGVsX3R5cGVfcHJpbWFyeScpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJHRhYmxlLT5wcmltYXJ5KFskcGl2b3RSb2xlLCAkY29sdW1uTmFtZXNbJ21vZGVsX21vcnBoX2tleSddLCAnbW9kZWxfdHlwZSddLAogICAgICAgICAgICAgICAgICAgICdtb2RlbF9oYXNfcm9sZXNfcm9sZV9tb2RlbF90eXBlX3ByaW1hcnknKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBTY2hlbWE6OmNyZWF0ZSgkdGFibGVOYW1lc1sncm9sZV9oYXNfcGVybWlzc2lvbnMnXSwgc3RhdGljIGZ1bmN0aW9uIChCbHVlcHJpbnQgJHRhYmxlKSB1c2UgKCR0YWJsZU5hbWVzLCAkcGl2b3RSb2xlLCAkcGl2b3RQZXJtaXNzaW9uKSB7CiAgICAgICAgICAgICR0YWJsZS0+dW5zaWduZWRCaWdJbnRlZ2VyKCRwaXZvdFBlcm1pc3Npb24pOwogICAgICAgICAgICAkdGFibGUtPnVuc2lnbmVkQmlnSW50ZWdlcigkcGl2b3RSb2xlKTsKCiAgICAgICAgICAgICR0YWJsZS0+Zm9yZWlnbigkcGl2b3RQZXJtaXNzaW9uKQogICAgICAgICAgICAgICAgLT5yZWZlcmVuY2VzKCdpZCcpIC8vIHBlcm1pc3Npb24gaWQKICAgICAgICAgICAgICAgIC0+b24oJHRhYmxlTmFtZXNbJ3Blcm1pc3Npb25zJ10pCiAgICAgICAgICAgICAgICAtPm9uRGVsZXRlKCdjYXNjYWRlJyk7CgogICAgICAgICAgICAkdGFibGUtPmZvcmVpZ24oJHBpdm90Um9sZSkKICAgICAgICAgICAgICAgIC0+cmVmZXJlbmNlcygnaWQnKSAvLyByb2xlIGlkCiAgICAgICAgICAgICAgICAtPm9uKCR0YWJsZU5hbWVzWydyb2xlcyddKQogICAgICAgICAgICAgICAgLT5vbkRlbGV0ZSgnY2FzY2FkZScpOwoKICAgICAgICAgICAgJHRhYmxlLT5wcmltYXJ5KFskcGl2b3RQZXJtaXNzaW9uLCAkcGl2b3RSb2xlXSwgJ3JvbGVfaGFzX3Blcm1pc3Npb25zX3Blcm1pc3Npb25faWRfcm9sZV9pZF9wcmltYXJ5Jyk7CiAgICAgICAgfSk7CgogICAgICAgIGFwcCgnY2FjaGUnKQogICAgICAgICAgICAtPnN0b3JlKGNvbmZpZygncGVybWlzc2lvbi5jYWNoZS5zdG9yZScpICE9ICdkZWZhdWx0JyA/IGNvbmZpZygncGVybWlzc2lvbi5jYWNoZS5zdG9yZScpIDogbnVsbCkKICAgICAgICAgICAgLT5mb3JnZXQoY29uZmlnKCdwZXJtaXNzaW9uLmNhY2hlLmtleScpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldmVyc2UgdGhlIG1pZ3JhdGlvbnMuCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBkb3duKCk6IHZvaWQKICAgIHsKICAgICAgICAkdGFibGVOYW1lcyA9IGNvbmZpZygncGVybWlzc2lvbi50YWJsZV9uYW1lcycpOwoKICAgICAgICBpZiAoZW1wdHkoJHRhYmxlTmFtZXMpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBcRXhjZXB0aW9uKCdFcnJvcjogY29uZmlnL3Blcm1pc3Npb24ucGhwIG5vdCBmb3VuZCBhbmQgZGVmYXVsdHMgY291bGQgbm90IGJlIG1lcmdlZC4gUGxlYXNlIHB1Ymxpc2ggdGhlIHBhY2thZ2UgY29uZmlndXJhdGlvbiBiZWZvcmUgcHJvY2VlZGluZywgb3IgZHJvcCB0aGUgdGFibGVzIG1hbnVhbGx5LicpOwogICAgICAgIH0KCiAgICAgICAgU2NoZW1hOjpkcm9wKCR0YWJsZU5hbWVzWydyb2xlX2hhc19wZXJtaXNzaW9ucyddKTsKICAgICAgICBTY2hlbWE6OmRyb3AoJHRhYmxlTmFtZXNbJ21vZGVsX2hhc19yb2xlcyddKTsKICAgICAgICBTY2hlbWE6OmRyb3AoJHRhYmxlTmFtZXNbJ21vZGVsX2hhc19wZXJtaXNzaW9ucyddKTsKICAgICAgICBTY2hlbWE6OmRyb3AoJHRhYmxlTmFtZXNbJ3JvbGVzJ10pOwogICAgICAgIFNjaGVtYTo6ZHJvcCgkdGFibGVOYW1lc1sncGVybWlzc2lvbnMnXSk7CiAgICB9Cn07CiI7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG1ldGFkYXRhIjthOjA6e319";